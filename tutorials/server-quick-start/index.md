---
layout: main
title: SMART on FHIR -- Tutorials -- Server Quick-start
---

# Tutorials - Quick-start: Making your EHR SMART

This is a getting-started guide for Health IT systems looking to support pluggable
apps using SMART on FHIR. We'll take you through the process of allowing your users to launch
a single app: the open-source SMART Growth Charts app.   

To get Growth Charts running inside your EHR, you'll implement a basic SMART on FHIR server that can:

1. Expose clinical data using FHIR `Patient` and `Observation` resources
2. Protect your clinical data via the [SMART on FHIR Authorization protocols](http://docs.smarthealthit.org/authorization/public) (based on OAuth2).
3. Allow a user to launch Growth Charts by clicking a "launch" button

To get up and running as easily as possible, this quick-start guide helps you
through two scenarios: first, to run the app in debugging mode against an
unprotected server, and second, to get the app running against an
OAuth2-protected server.

## Debugging: Launch Growth Charts against your unprotected server

Once you've exposed the necessary clinical data (see payload examples below for
full details), make sure that you're exposing Cross-Origin Request Support (CORS) headers
with your HTTP responses. A quick set of headers to get starter would be:

```
Access-Control-Allow-Credentials: true
Access-Control-Allow-Headers: origin, authorization, accept, content-type, x-requested-with
Access-Control-Allow-Methods: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS
Access-Control-Allow-Origin: *
```

At this point, you can launch the Growth Charts app in debugging mode (no
authorization required).

You'll expose a "launch" button that users can click from within an existing EHR session.  When a user clicks this button, you'll load the following URL in a new browser window (or an iframe, or an embedded browser widget, depending on the architecture of your EHR), supplying two URL parameters:

[https://fhir.smarthealthit.org/apps/growth-chart/launch.html?](https://fhir.smarthealthit.org/apps/growth-chart/launch.html?fhirServiceUrl=https://fhir-open-api.smarthealthit.org&patientId=1482713)

 * `fhirServiceUrl={FHIR base URL of your unprotected server}`
 * `patientId={patient ID from the current user session}`

You can click the URL above for a live example (running against our open testing server).

## For real: Launch Growth Charts against your OAuth2-protected server

Once you've implemented the [SMART on FHIR Authorization
protocols](http://docs.smarthealthit.org/authorization/public), you can wire up your "launch" button to launch
the app in production mode (with authorization) by completing the following
sequence:

#### 1. Create a launch context

On your back-end, as soon as a user clicks the launch button you'll create a SMART "launch context" that includes (at least) the patient ID from the current EHR user session.  You'll assign a new "launch id" to
this context, and you'll pass that id to the Growth Charts app as a URL parameter. In
the real world, you'd create a launch context every time a user launches an app
 -- though for prototyping, you might just want to create a trivial implementation
that hard-codes a set of sample values.

#### 2. Open the app

When a user launches the Growth Charts app from inside your EHR, you'll load the following URL in a new browser window (or an iframe, or an embedded browser widget, depending on the architecture of your EHR), supplying two URL parameters:

[https://fhir.smarthealthit.org/apps/growth-chart/launch.html?](#)

 * `iss={FHIR base URL of your OAuth2-protected server}`
 * `launch={opaque launch ID generated by your server}`

(Note: the link above is for example purposes only. You'll need to fill in your
own server's issuer and a launch ID to proceed.)

## Data requirements

When the SMART Growth Charts, it will fetch:

### 1. Patient demographics
```
curl 'https://fhir-open-api.smarthealthit.org/Patient/1482713' -H 'Accept: application/json'
```

### 2. All Weight, Height, Head Circumference, and BMI Observations
Note LOINC Codes: `3141-9`, `8302-2`, `8287-5`, `39156-5`

```
curl 'https://fhir-open-api.smarthealthit.org/Observation?subject%3APatient=1482713&name=3141-9%2C8302-2%2C8287-5%2C39156-5&_count=50' -H 'Accept: application/json' 
```

## Sample patient demographics

```
{
  "resourceType": "Patient",
  "text": {
    "status": "generated",
    "div": "<div>\n        \n            <p>Susan Clark</p>\n      \n          </div>"
  },
  "identifier": [
    {
      "use": "usual",
      "label": "SMART Hospiptal MRN",
      "system": "urn:oid:0.1.2.3.4.5.6.7",
      "value": "1482713"
    }
  ],
  "name": [
    {
      "use": "official",
      "family": [
        "Clark"
      ],
      "given": [
        "Susan",
        "A."
      ]
    }
  ],
  "telecom": [
    {
      "system": "phone",
      "value": "800-576-9327",
      "use": "home"
    },
    {
      "system": "email",
      "value": "susan.clark@example.com"
    }
  ],
  "gender": {
    "coding": [
      {
        "system": "http://hl7.org/fhir/v3/AdministrativeGender",
        "code": "F",
        "display": "Female"
      }
    ]
  },
  "birthDate": "2000-12-27",
  "address": [
    {
      "use": "home",
      "line": [
        "52 Highland St"
      ],
      "city": "Tulsa",
      "state": "OK",
      "zip": "74116",
      "country": "USA"
    }
  ],
  "active": true
}
```


## Sample vitals (height, weight, BMI)
```
{
  "resourceType": "Encounter",
  "text": {
    "status": "generated",
    "div": "<div>2003-11-28: ambulatory encounter</div>"
  },
  "status": "finished",
  "class": "ambulatory",
  "subject": {
    "reference": "Patient/1482713"
  },
  "period": {
    "start": "2003-11-28",
    "end": "2003-11-28"
  }
}
```

```
{
  "resourceType": "Bundle",
  "title": "FHIR Atom Feed",
  "id": "https://fhir-open-api.smarthealthit.org/Observation/_search?subject%3APatient=1482713&name=3141-9%2C8302-2%2C8287-5%2C39156-5&_format=json",
  "link": [
    {
      "rel": "self",
      "href": "https://fhir-open-api.smarthealthit.org/Observation/_search?subject%3APatient=1482713&name=3141-9%2C8302-2%2C8287-5%2C39156-5&_format=json"
    },
    {
      "rel": "next",
      "href": "https://fhir-open-api.smarthealthit.org/Observation/_search?subject%3APatient=1482713&name=3141-9%2C8302-2%2C8287-5%2C39156-5&_format=json&_count=50&_skip=50"
    }
  ],
  "totalResults": 69,
  "updated": "2015-01-17T19:52:49.977-00:00",
  "author": [
    {
      "name": "groovy.config.atom.author-name",
      "uri": "groovy.config.atom.author-uri"
    }
  ],
  "entry": [
    {
      "title": "Observation/428-height",
      "id": "https://fhir-open-api.smarthealthit.org/Observation/428-height",
      "updated": "2015-01-17T19:52:49.977-00:00",
      "content": {
        "resourceType": "Observation",
        "extension": [
          {
            "url": "http://fhir-registry.smarthealthit.org/Profile/vital-signs#encounter",
            "valueResource": {
              "reference": "Encounter/428"
            }
          }
        ],
        "text": {
          "status": "generated",
          "div": "<div>2003-11-28: height = 115.316 cm</div>"
        },
        "name": {
          "coding": [
            {
              "system": "http://loinc.org",
              "code": "8302-2",
              "display": "height"
            }
          ]
        },
        "valueQuantity": {
          "value": 115.316,
          "units": "cm",
          "system": "http://unitsofmeasure.org",
          "code": "cm"
        },
        "appliesDateTime": "2003-11-28",
        "status": "final",
        "reliability": "ok",
        "subject": {
          "reference": "Patient/1482713"
        }
      }
    },
    {
      "title": "Observation/428-weight",
      "id": "https://fhir-open-api.smarthealthit.org/Observation/428-weight",
      "updated": "2015-01-17T19:52:49.977-00:00",
      "content": {
        "resourceType": "Observation",
        "extension": [
          {
            "url": "http://fhir-registry.smarthealthit.org/Profile/vital-signs#encounter",
            "valueResource": {
              "reference": "Encounter/428"
            }
          }
        ],
        "text": {
          "status": "generated",
          "div": "<div>2003-11-28: weight = 18.55193 kg</div>"
        },
        "name": {
          "coding": [
            {
              "system": "http://loinc.org",
              "code": "3141-9",
              "display": "weight"
            }
          ]
        },
        "valueQuantity": {
          "value": 18.55193,
          "units": "kg",
          "system": "http://unitsofmeasure.org",
          "code": "kg"
        },
        "appliesDateTime": "2003-11-28",
        "status": "final",
        "reliability": "ok",
        "subject": {
          "reference": "Patient/1482713"
        }
      }
    },
    {
      "title": "Observation/428-bmi",
      "id": "https://fhir-open-api.smarthealthit.org/Observation/428-bmi",
      "updated": "2015-01-17T19:52:49.977-00:00",
      "content": {
        "resourceType": "Observation",
        "extension": [
          {
            "url": "http://fhir-registry.smarthealthit.org/Profile/vital-signs#encounter",
            "valueResource": {
              "reference": "Encounter/428"
            }
          }
        ],
        "text": {
          "status": "generated",
          "div": "<div>2003-11-28: bmi = 13.9 kg/m2</div>"
        },
        "name": {
          "coding": [
            {
              "system": "http://loinc.org",
              "code": "39156-5",
              "display": "bmi"
            }
          ]
        },
        "valueQuantity": {
          "value": 13.9,
          "units": "kg/m2",
          "system": "http://unitsofmeasure.org",
          "code": "kg/m2"
        },
        "appliesDateTime": "2003-11-28",
        "status": "final",
        "reliability": "ok",
        "subject": {
          "reference": "Patient/1482713"
        }
      }
    }
  ]
}
```
